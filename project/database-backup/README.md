# Database Backup - ุฏููู ุงูุงุณุชุนุงุฏุฉ

## ๐ฆ ูุญุชููุงุช ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ

ูุฐุง ุงููุฌูุฏ ูุญุชูู ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ูุงููุฉ ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช:

1. **Schema** (ุงูุจููุฉ): ููุฌูุฏ ูู `postgresql_schema/COMPLETE_SCHEMA.sql`
2. **Data** (ุงูุจูุงูุงุช): ููู `data-backup-*.sql` ูู ูุฐุง ุงููุฌูุฏ
3. **Restore Script** (ุณูุฑูุจุช ุงูุงุณุชุนุงุฏุฉ): `restore-database.sh`

## ๐ ููููุฉ ุงูุงุณุชุนุงุฏุฉ ุนูู ุงูุณูุฑูุฑ

### ุงูุทุฑููุฉ ุงูุฃููู: ุจุงุณุชุฎุฏุงู ุงูุณูุฑูุจุช ุงูุชููุงุฆู (ููุตู ุจู)

```bash
# 1. ุงูุชูู ุฅูู ูุฌูุฏ ุงูุจูุงุจ
cd database-backup

# 2. ุชุฃูุฏ ูู ูุฌูุฏ ููู .env ูู ุงููุฌูุฏ ุงูุฑุฆูุณู ูุญุชูู ุนูู:
# DB_HOST=localhost
# DB_PORT=5432
# DB_NAME=consulate
# DB_USER=postgres
# DB_PASSWORD=your_password

# 3. ุดุบู ุณูุฑูุจุช ุงูุงุณุชุนุงุฏุฉ
./restore-database.sh
```

### ุงูุทุฑููุฉ ุงูุซุงููุฉ: ูุฏููุงู

```bash
# 1. ุงุณุชุนุงุฏุฉ ุงูุจููุฉ (Schema)
psql -h localhost -U postgres -d consulate -f ../postgresql_schema/COMPLETE_SCHEMA.sql

# 2. ุงุณุชุนุงุฏุฉ ุงูุจูุงูุงุช (Data)
psql -h localhost -U postgres -d consulate -f data-backup-*.sql
```

## ๐ ุงููุชุทูุจุงุช

- PostgreSQL 14 ุฃู ุฃุญุฏุซ
- psql (PostgreSQL client)
- ูุงุนุฏุฉ ุจูุงูุงุช ูุงุฑุบุฉ ุฌุงูุฒุฉ

## โ๏ธ ููุงุญุธุงุช ูููุฉ

1. **ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุชุญุชูู ุนูู**:
   - ุฌููุน ุงูุฌุฏุงูู ูุงูุจูุงูุงุช
   - ุฌููุน ุงูุตูุงุญูุงุช ูุงูุณูุงุณุงุช (RLS)
   - ุฌููุน ุงูู Functions ูุงูู Triggers
   - ุฌููุน ุงูู Indexes

2. **ูุง ุชุญุชูู ุนูู**:
   - ุงููููุงุช ุงููุฑููุนุฉ (Storage)
   - ุฅุนุฏุงุฏุงุช Supabase Auth
   - Edge Functions

3. **ููุญุตูู ุนูู ูุณุฎุฉ ุงุญุชูุงุทูุฉ ุฌุฏูุฏุฉ**:
   ```bash
   npm run backup-db
   # ุฃู
   node scripts/export-full-database.js
   ```

## ๐ ุงูุฃูุงู

- ุงุญุชูุธ ุจุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูู ููุงู ุขูู
- ูุง ุชุดุงุฑู ูููุงุช ุงูุจูุงุจ ุนููุงู (ุชุญุชูู ุนูู ุจูุงูุงุช ุญุณุงุณุฉ)
- ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ ููุงุนุฏุฉ ุงูุจูุงูุงุช

## ๐ ุงูุฏุนู

ุฅุฐุง ูุงุฌูุช ุฃู ูุดุงูู ูู ุงูุงุณุชุนุงุฏุฉ:
1. ุชุญูู ูู ุงุชุตุงู ูุงุนุฏุฉ ุงูุจูุงูุงุช
2. ุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู
3. ุฑุงุฌุน ุณุฌูุงุช ุงูุฃุฎุทุงุก (error logs)

---

ุชู ุฅูุดุงุก ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ูู: 2026-01-17T22:33:37.933Z
