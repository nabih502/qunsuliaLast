# ๐ ุฏููู ุณุฑูุน: ุงููุณุฎ ุงูุงุญุชูุงุทู ูุงูุงุณุชุนุงุฏุฉ

## โก ุฎุทูุงุช ุณุฑูุนุฉ (5 ุฏูุงุฆู)

### 1๏ธโฃ ุนูู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ

```bash
npm run backup-db
```

ุณุชุฌุฏ ุงููุณุฎุฉ ูู ูุฌูุฏ `database-backup/`

---

### 2๏ธโฃ ููู ุงููุณุฎุฉ ููุณูุฑูุฑ

```bash
# ููู ุงููุฌูุฏุงุช ุงููุทููุจุฉ
scp -r database-backup root@your-server-ip:/root/
scp -r postgresql_schema root@your-server-ip:/root/
```

---

### 3๏ธโฃ ุงูุงุณุชุนุงุฏุฉ ุนูู ุงูุณูุฑูุฑ

```bash
# ุนูู ุงูุณูุฑูุฑ
cd database-backup

# ูุณุฎ ููู ุงูุฅุนุฏุงุฏุงุช
cp .env.example .env
nano .env  # ุนุฏู ุงูุจูุงูุงุช

# ุชุดุบูู ุงูุงุณุชุนุงุฏุฉ
./restore-database.sh
```

---

## ๐ ูุง ุชู ุชุตุฏูุฑูุ

โ **ุชู ุชุตุฏูุฑ 2,472 ุตู ูู ุงูุจูุงูุงุช** ุดุงููุฉ:

- 13 ููุทูุฉ (regions)
- 117 ูุฏููุฉ (cities)
- 243 ุญู (districts)
- 24 ุฎุฏูุฉ (services)
- 445 ุญูู ุฎุฏูุฉ (service fields)
- 175 ูุณุชูุฏ ูุทููุจ (documents)
- 181 ูุชุทูุจ (requirements)
- 32 ุทูุจ (applications)
- 16 ุญุงูุฉ ุทูุจ (statuses)
- 1,000 ููุนุฏ ูุชุงุญ (appointment slots)
- 9 ููุงุนูุฏ (appointments)
- 4 ุดุฑูุงุช ุดุญู (shipping companies)
- 8 ุฃุฎุจุงุฑ (news articles)
- 13 ูุนุงููุฉ (events)
- 28 ุณุคุงู ููุดุงุช ุจูุช (chatbot Q&A)
- 29 ูุญุงุฏุซุฉ ุฏุนู (chat conversations)
- 127 ุฑุณุงูุฉ ุฏุนู (chat messages)
- ูุงููุฒูุฏ...

---

## ๐ ุญุฌู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ

- **ุญุฌู ุงูููู**: 0.80 MB
- **ุนุฏุฏ ุงูุฌุฏุงูู**: 70+ ุฌุฏูู
- **ููุช ุงูุชุตุฏูุฑ**: ~10 ุซูุงูู
- **ููุช ุงูุงุณุชุนุงุฏุฉ ุงููุชููุน**: 1-2 ุฏูุงุฆู

---

## โ๏ธ ููุงุญุธุงุช ูุงูุฉ

### ูุง ุชู ุชุตุฏูุฑู โ
- ุฌููุน ุจูุงูุงุช ุงูุฌุฏุงูู
- ุงูุนูุงูุงุช (Foreign Keys)
- ุงูู Indexes
- ุงูู RLS Policies
- ุงูู Functions ูุงูู Triggers

### ูุง ูู ูุชู ุชุตุฏูุฑู โ๏ธ
- ูููุงุช Storage (ุงูุตูุฑ ูุงููุณุชูุฏุงุช ุงููุฑููุนุฉ)
- ุจูุงูุงุช ุงููุณุชุฎุฏููู ูู Supabase Auth
- Edge Functions (ููุฌูุฏุฉ ูู ุงูููุฏ)

---

## ๐ง ูุชุทูุจุงุช ุงูุณูุฑูุฑ

1. **PostgreSQL 14+** ูุซุจุช ููุนูู
2. **ุญุณุงุจ ูุณุชุฎุฏู** ูุน ุตูุงุญูุงุช ูุงููุฉ
3. **ูุงุนุฏุฉ ุจูุงูุงุช** ุฌุฏูุฏุฉ ุฃู ูุงุฑุบุฉ

---

## ๐ ุญู ุงููุดุงูู ุงูุณุฑูุน

### ุงููุดููุฉ: "Permission denied"
```bash
chmod +x restore-database.sh
```

### ุงููุดููุฉ: "Connection refused"
```bash
sudo systemctl start postgresql
```

### ุงููุดููุฉ: "Database does not exist"
```bash
sudo -u postgres createdb consulate
```

---

## ๐ ุงููุฒูุฏ ูู ุงููุณุงุนุฏุฉุ

ุฑุงุฌุน ุงูุฏููู ุงูุดุงูู: [BACKUP_GUIDE_AR.md](./BACKUP_GUIDE_AR.md)

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุงูุงุณุชุนุงุฏุฉ:

```bash
psql -d consulate -c "SELECT count(*) FROM applications;"
psql -d consulate -c "SELECT count(*) FROM services;"
```

ุฅุฐุง ุธูุฑุช ุงูุฃุฑูุงูุ ูุงูุงุณุชุนุงุฏุฉ ูุฌุญุช! ๐

---

ุชู ุฅูุดุงุก ุงููุณุฎุฉ ูู: ${new Date().toISOString()}
