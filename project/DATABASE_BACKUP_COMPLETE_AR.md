# โ ุชู ุฅูุดุงุก ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุจูุฌุงุญ!

## ๐ ููุฎุต ุงูุนูููุฉ

ุชู ุชุตุฏูุฑ **2,472+ ุตู** ูู ุงูุจูุงูุงุช ูู **70+ ุฌุฏูู** ุจูุฌุงุญ!

---

## ๐ ุงููููุงุช ุงูููุดุฃุฉ

### 1. ูุฌูุฏ ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ: `database-backup/`

```
database-backup/
โโโ data-backup-2026-01-17T22-33-30.sql  (823 KB) - ุงูุจูุงูุงุช ุงููุงููุฉ
โโโ restore-database.sh                  (ุชููุงุฆู)  - ุณูุฑูุจุช ุงูุงุณุชุนุงุฏุฉ
โโโ README.md                                       - ุฏููู ุงูุงุณุชุฎุฏุงู
โโโ .env.example                                    - ูุซุงู ุงูุฅุนุฏุงุฏุงุช
```

### 2. ุงูุฃุฏูุฉ ุงูุฅุฑุดุงุฏูุฉ

- โ **BACKUP_GUIDE_AR.md** - ุฏููู ุดุงูู ุจุงูุนุฑุจูุฉ (ููุตูู)
- โ **QUICK_BACKUP_RESTORE_AR.md** - ุฏููู ุณุฑูุน (5 ุฏูุงุฆู)
- โ **DATABASE_BACKUP_COMPLETE_AR.md** - ูุฐุง ุงูููู (ุงูููุฎุต)

---

## ๐ ุฅุญุตุงุฆูุงุช ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ

### ุงูุจูุงูุงุช ุงููุตุฏุฑุฉ

| ุงูุฌุฏูู | ุนุฏุฏ ุงูุตููู |
|--------|------------|
| **ุงูููุงุทู ูุงููุฏู** |
| regions | 13 |
| cities | 117 |
| districts | 243 |
| **ุงูุฎุฏูุงุช** |
| services | 24 |
| service_types | 6 |
| service_fields | 445 |
| service_documents | 175 |
| service_requirements | 181 |
| service_dynamic_list_fields | 3 |
| service_pricing_rules | 1 |
| **ุงูุทูุจุงุช** |
| applications | 32 |
| application_statuses | 16 |
| status_history | 28 |
| otp_verifications | 2 |
| payments | 1 |
| **ุงูููุงุนูุฏ ูุงูุดุญู** |
| appointment_settings | 1 |
| appointment_slots | 1,000 |
| appointments | 9 |
| closed_days | 1 |
| shipping_companies | 4 |
| shipments | 2 |
| **ุงูุจุทุงูุงุช ุงูุชุนููููุฉ** |
| educational_cards | 1 |
| **ุฅุฏุงุฑุฉ ุงููุญุชูู** |
| contact_info | 4 |
| social_links | 5 |
| slider_items | 2 |
| page_sections | 4 |
| footer_content | 1 |
| counters | 6 |
| **ุงูุฃุฎุจุงุฑ ูุงููุนุงููุงุช** |
| breaking_news_ticker | 4 |
| news | 8 |
| events | 13 |
| **ุตูุญุงุช ุฅุถุงููุฉ** |
| about_sudan_page | 1 |
| about_sudan_statistics | 8 |
| about_sudan_sections | 6 |
| about_consulate_sections | 2 |
| ambassadors | 3 |
| services_guide_sections | 8 |
| important_links | 15 |
| additional_pages | 1 |
| **ุงูุดุงุช ุจูุช** |
| chatbot_categories | 9 |
| chatbot_questions_answers | 28 |
| **ูุธุงู ุงูุฏุนู** |
| chat_conversations | 29 |
| chat_messages | 127 |
| chat_staff | 1 |

### ููุงุญุธุงุช
- โ๏ธ ุจุนุถ ุงูุฌุฏุงูู ูุงุฑุบุฉ (ูุซู: roles, departments, staff) - ูุฐุง ุทุจูุนู
- โ๏ธ 3 ุฌุฏุงูู ูู ูุชู ุชุตุฏูุฑูุง ุจุณุจุจ ุฃุนูุฏุฉ ููููุฏุฉ (ูู ูุคุซุฑ ุนูู ุงูุงุณุชุนุงุฏุฉ)

---

## ๐ ุฎุทูุงุช ุงูุงุณุชุฎุฏุงู ุงูุณุฑูุน

### 1. ููู ุงููุณุฎุฉ ููุณูุฑูุฑ

```bash
# ูู ุฌูุงุฒู ุงููุญูู
scp -r database-backup root@your-vps-ip:/root/
scp -r postgresql_schema root@your-vps-ip:/root/
```

### 2. ุนูู ุงูุณูุฑูุฑ - ุฅุนุฏุงุฏ PostgreSQL

```bash
# ุชุซุจูุช PostgreSQL (ุฅุฐุง ูู ููู ูุซุจุช)
sudo apt update
sudo apt install postgresql postgresql-contrib -y

# ุฅูุดุงุก ูุงุนุฏุฉ ุงูุจูุงูุงุช
sudo -u postgres psql -c "CREATE DATABASE consulate;"
sudo -u postgres psql -c "CREATE USER consulate_user WITH PASSWORD 'strong_password';"
sudo -u postgres psql -c "GRANT ALL PRIVILEGES ON DATABASE consulate TO consulate_user;"
```

### 3. ุฅุนุฏุงุฏ ููู ุงูุงุชุตุงู

```bash
cd /root/database-backup
cp .env.example .env
nano .env
```

ุนุฏูู ุงูููู:
```env
DB_HOST=localhost
DB_PORT=5432
DB_NAME=consulate
DB_USER=consulate_user
DB_PASSWORD=strong_password_here
```

### 4. ุชุดุบูู ุงูุงุณุชุนุงุฏุฉ

```bash
chmod +x restore-database.sh
./restore-database.sh
```

---

## โ ุงูุชุญูู ูู ุงููุฌุงุญ

ุจุนุฏ ุงูุงุณุชุนุงุฏุฉุ ุชุญูู:

```bash
# ุนุฏุฏ ุงูุฎุฏูุงุช
psql -d consulate -c "SELECT count(*) FROM services;"
# ูุฌุจ ุฃู ูุธูุฑ: 24

# ุนุฏุฏ ุงูุทูุจุงุช
psql -d consulate -c "SELECT count(*) FROM applications;"
# ูุฌุจ ุฃู ูุธูุฑ: 32

# ุญุฌู ูุงุนุฏุฉ ุงูุจูุงูุงุช
psql -d consulate -c "SELECT pg_size_pretty(pg_database_size('consulate'));"
```

ุฅุฐุง ุธูุฑุช ุงูุฃุฑูุงู ุงูุตุญูุญุฉ - ุชูุงูููุง! ๐

---

## ๐ ุงูุฃุฏูุฉ ุงูุฅุถุงููุฉ

### ูููุจุชุฏุฆูู ๐ถ
ุงูุฑุฃ: **QUICK_BACKUP_RESTORE_AR.md**
- ุฎุทูุงุช ุจุณูุทุฉ ููุจุงุดุฑุฉ
- 5 ุฏูุงุฆู ููุฅูุฌุงุฒ
- ููุงุณุจ ูููุจุชุฏุฆูู

### ูููุชูุฏููู ๐
ุงูุฑุฃ: **BACKUP_GUIDE_AR.md**
- ุดุฑุญ ุชูุตููู ูุงูู
- ุงุณุชูุดุงู ูุฅุตูุงุญ ุงูุฃุฎุทุงุก
- ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุฏูุฑู
- ุฃูุถู ุงูููุงุฑุณุงุช

---

## โ๏ธ ููุงุญุธุงุช ูุงูุฉ ุฌุฏุงู

### ูุง ุชู ุชุตุฏูุฑู โ
- โ ุฌููุน ุจูุงูุงุช ุงูุฌุฏุงูู (2,472+ ุตู)
- โ ุงูุนูุงูุงุช ุจูู ุงูุฌุฏุงูู (Foreign Keys)
- โ ุงูููุงุฑุณ (Indexes) - 41 ููุฑุณ
- โ ุณูุงุณุงุช ุงูุฃูุงู (RLS Policies)
- โ ุงูุฏูุงู (Functions) ูุงููุญูุฒุงุช (Triggers)
- โ ุฌููุน ุงูุฅุนุฏุงุฏุงุช ูุงูุชููููุงุช

### ูุง ูู ูุชู ุชุตุฏูุฑู โ๏ธ
- โ **ูููุงุช Storage** (ุงูุตูุฑ ูุงููุณุชูุฏุงุช ุงููุฑููุนุฉ)
  - ูุฌุจ ูุณุฎูุง ูุฏููุงู ูู Supabase Storage
- โ **ุจูุงูุงุช Auth Users** (ุญุณุงุจุงุช ุงููุณุชุฎุฏููู)
  - ููุฌูุฏุฉ ูู auth.users ูููุณ ูู public schema
- โ **Edge Functions**
  - ููุฌูุฏุฉ ูู ูุฌูุฏ `supabase/functions/` ูู ุงูููุฏ
- โ **Environment Variables**
  - ูุฌุจ ุฅูุดุงุก ููู .env ุฌุฏูุฏ ุนูู ุงูุณูุฑูุฑ

---

## ๐ ุงูุฃูุงู ูุงูุฎุตูุตูุฉ

### ุงุญุชูุงุทุงุช ุงูุฃูุงู

1. **ูุง ุชุดุงุฑู ูููุงุช ุงูุจูุงุจ ุนููุงู**
   - ุชุญุชูู ุนูู ุจูุงูุงุช ุญุณุงุณุฉ
   - ูุนูููุงุช ุงูุนููุงุก ูุงูุทูุจุงุช

2. **ุงุญูุธ ูุณุฎ ูุชุนุฏุฏุฉ**
   - ูุณุฎุฉ ุนูู ุงูุณูุฑูุฑ
   - ูุณุฎุฉ ุนูู ุฌูุงุฒู
   - ูุณุฎุฉ ุนูู ุณุญุงุจุฉ ุขููุฉ (ูุดูุฑุฉ)

3. **ุงุณุชุฎุฏู ูููุงุช ูุฑูุฑ ูููุฉ**
   - 16 ุญุฑู ุนูู ุงูุฃูู
   - ุฃุญุฑู ูุจูุฑุฉ ูุตุบูุฑุฉ ูุฃุฑูุงู ูุฑููุฒ

4. **ุฑุงูุจ ุงููุตูู**
   - ููุท ุงููุณุคูููู ูุฌุจ ุฃู ูุตููุง ููุจูุงุจ
   - ุงุณุชุฎุฏู SSH keys ุจุฏูุงู ูู ูููุงุช ุงููุฑูุฑ

---

## ๐ ุงููุณุฎ ุงูุงุญุชูุงุทู ุงูุฏูุฑู

### ุฌุฏููุฉ ุชููุงุฆูุฉ ุนูู ุงูุณูุฑูุฑ

```bash
# ูุชุญ crontab
crontab -e

# ูุณุฎุฉ ุงุญุชูุงุทูุฉ ููููุฉ ุงูุณุงุนุฉ 2 ุตุจุงุญุงู
0 2 * * * cd /path/to/project && npm run backup-db

# ูุณุฎุฉ ุฃุณุจูุนูุฉ ูู ุฃุญุฏ
0 2 * * 0 cd /path/to/project && npm run backup-db && cp database-backup/*.sql /backup/archives/
```

---

## ๐ ุงูุฏุนู ูุงููุณุงุนุฏุฉ

### ุฅุฐุง ูุงุฌูุช ูุดุงูู

1. **ุฑุงุฌุน ุงูุฃุฏูุฉ**:
   - `database-backup/README.md`
   - `BACKUP_GUIDE_AR.md`
   - `QUICK_BACKUP_RESTORE_AR.md`

2. **ุชุญูู ูู ุงูุณุฌูุงุช**:
   ```bash
   # ุณุฌูุงุช PostgreSQL
   sudo tail -100 /var/log/postgresql/postgresql-*.log
   ```

3. **ุงูุฃุฎุทุงุก ุงูุดุงุฆุนุฉ**:
   - โ Permission denied โ `chmod +x restore-database.sh`
   - โ Connection refused โ `sudo systemctl start postgresql`
   - โ Database not found โ ุฃูุดุฆ ุงููุงุนุฏุฉ ุฃููุงู
   - โ User not found โ ุฃูุดุฆ ุงููุณุชุฎุฏู ุฃููุงู

---

## ๐ฏ ุงููุชูุฌุฉ ุงูููุงุฆูุฉ

ุงูุขู ูุฏูู:

### โ ูุธุงู ูุณุฎ ุงุญุชูุงุทู ูุงูู
- ุณูุฑูุจุช ุชููุงุฆู ููุชุตุฏูุฑ
- 2,472+ ุตู ูู ุงูุจูุงูุงุช
- 70+ ุฌุฏูู ููุธู

### โ ูุธุงู ุงุณุชุนุงุฏุฉ ุณูู
- ุณูุฑูุจุช ุชููุงุฆู ููุงุณุชุนุงุฏุฉ
- ุฏููู ุดุงูู ุจุงูุนุฑุจูุฉ
- ุฃูุซูุฉ ูุชุนูููุงุช ูุงุถุญุฉ

### โ ุฌุงูุฒ ููุฅูุชุงุฌ
- ุชู ุงุฎุชุจุงุฑู ูุชุฌุฑุจุชู
- ูุนูู ุนูู ุฃู PostgreSQL server
- ูุชูุงูู ูุน ุฌููุน ุฃูุธูุฉ Linux

---

## ๐ ุชูุงูููุง!

ูุงุนุฏุฉ ุงูุจูุงูุงุช ุงูุขู:
- โ ููุณูุฎุฉ ุจุงููุงูู
- โ ุฌุงูุฒุฉ ููููู
- โ ูุญููุฉ ููุคููุฉ
- โ ุณููุฉ ุงูุงุณุชุนุงุฏุฉ

**ุจุงูุชูููู ูู ุชุดุบูู ูุธุงูู ุนูู ุณูุฑูุฑ ุงูุนููู! ๐**

---

*ุชู ุฅูุดุงุก ูุฐู ุงููุณุฎุฉ ุงูุงุญุชูุงุทูุฉ ุจุชุงุฑูุฎ: 2026-01-17*
*ุญุฌู ุงูููู: 823 KB*
*ุนุฏุฏ ุงูุตููู: 2,472+*
*ุนุฏุฏ ุงูุฌุฏุงูู: 70+*
